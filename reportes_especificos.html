<!DOCTYPE html>
<html>
<head>
    <title>Reportes Específicos</title>
    <style>
        body { font-family: sans-serif; }
        .container { width: 90%; max-width: 1200px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9; }
        h1, h2, h3 { color: #333; }
        h2 { margin-top: 20px; }
        .report-section { margin-bottom: 20px; padding: 15px; border: 1px solid #eee; border-radius: 3px; background-color: #fff; }
        .report-list { list-style: none; padding-left: 0; }
        .report-list li { margin-bottom: 5px; }
        .talla-group { margin-bottom: 10px; }
        .talla-list { list-style: none; padding-left: 20px; }
        .carga-familiar-item { margin-bottom: 8px; }
        .hijos-list { list-style: none; padding-left: 20px; }
        .button-group { margin-top: 10px; }
        .button-group button { padding: 8px 15px; margin-right: 10px; cursor: pointer; }
        .back-link { display: block; margin-top: 20px; text-align: center; color: #007bff; text-decoration: none; }
        .back-link:hover { text-decoration: underline; }
        .report-content { display: none; } /* Inicialmente oculto */
        .show-content { display: block; }
    </style>
    <script>
        function toggleReport(sectionId) {
            const content = document.getElementById(sectionId);
            content.classList.toggle('show-content');
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Reportes Específicos</h1>

        <div class="report-section">
            <h2>Generales</h2>
            <button onclick="toggleReport('generales-content')">Generar Reporte</button>
            <div id="generales-content" class="report-content">
                <p>Cantidad total de trabajadores: {{ total_trabajadores }}</p>
                <p>Cantidad de empleados: {{ empleados }}</p>
                <p>Cantidad de obreros: {{ obreros }}</p>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='generales') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='generales') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores por Jefes</h2>
            <button onclick="toggleReport('jefes-content')">Generar Reporte</button>
            <div id="jefes-content" class="report-content">
                {% for jefe, data in jefes_data.items() %}
                    <h3>{{ jefe }}</h3>
                    <p>Total a cargo: {{ data.empleados + data.obreros }} (Empleados: {{ data.empleados }}, Obreros: {{ data.obreros }})</p>
                    <ul class="report-list">
                        {% for trabajador in data.trabajadores %}
                            <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }}</li>
                        {% endfor %}
                    </ul>
                {% endfor %}
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='jefes') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='jefes') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores por Concejos Comunales</h2>
            <button onclick="toggleReport('concejos-content')">Generar Reporte</button>
            <div id="concejos-content" class="report-content">
                {% for concejo, trabajadores in concejos_comunales_data.items() %}
                    <h3>{{ concejo }}</h3>
                    <ul class="report-list">
                        {% for trabajador in trabajadores %}
                            <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }}</li>
                        {% endfor %}
                    </ul>
                {% endfor %}
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='concejos') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='concejos') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores pertenecientes al PSUV</h2>
            <button onclick="toggleReport('psuv-content')">Generar Reporte</button>
            <div id="psuv-content" class="report-content">
                <ul class="report-list">
                    {% for trabajador in psuv_data %}
                        <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }}</li>
                    {% endfor %}
                </ul>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='psuv') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='psuv') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores por Centro de Votación</h2>
            <button onclick="toggleReport('centros-content')">Generar Reporte</button>
            <div id="centros-content" class="report-content">
                {% for centro, trabajadores in centros_votacion_data.items() %}
                    <h3>{{ centro }}</h3>
                    <ul class="report-list">
                        {% for trabajador in trabajadores %}
                            <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }} - Dirección: {{ trabajador.direccion }}</li>
                        {% endfor %}
                    </ul>
                {% endfor %}
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='centros') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='centros') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores por tallas de Camisa, Pantalón y calzado</h2>
            <button onclick="toggleReport('tallas-content')">Generar Reporte</button>
            <div id="tallas-content" class="report-content">
                {% for tipo_talla, tallas in tallas_data.items() %}
                    <h3>Tallas de {{ tipo_talla|capitalize }}</h3>
                    {% for talla, trabajadores in tallas.items() %}
                        {% if talla %}
                            <div class="talla-group">
                                <strong>Talla: {{ talla }}</strong>
                                <ul class="talla-list">
                                    {% for trabajador in trabajadores %}
                                        <li>{{ trabajador.nombres }} {{ trabajador.apellidos }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='tallas') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='tallas') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores por numero de Carga Familiar (Mayor a Menor)</h2>
            <button onclick="toggleReport('carga-familiar-content')">Generar Reporte</button>
            <div id="carga-familiar-content" class="report-content">
                <ul class="report-list">
                    {% for item in carga_familiar_data %}
                        <li class="carga-familiar-item">
                            {{ item.trabajador.nombres }} {{ item.trabajador.apellidos }} - Cédula: {{ item.trabajador.cedula }} - Teléfono: {{ item.trabajador.telefono_movil }} - Carga Familiar: {{ item.carga_familiar }}
                        </li>
                    {% endfor %}
                </ul>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='carga_familiar') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='carga_familiar') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores con hijos e hijas</h2>
            <button onclick="toggleReport('hijos-content')">Generar Reporte</button>
            <div id="hijos-content" class="report-content">
                <form method="POST" action="{{ url_for('reportes_hijos_por_edad') }}">
                    Rango de Edades:
                    <input type="number" name="edad_min" placeholder="Edad Mínima">
                    <input type="number" name="edad_max" placeholder="Edad Máxima">
                    <button type="submit">Filtrar por Edad</button>
                </form>
                <ul class="report-list">
                    {% for trabajador in trabajadores_con_hijos %}
                        <li>
                            {{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }} - Hijos: {{ trabajador.hijos|length }}
                            {% if trabajador.hijos %}
                                <ul class="hijos-list">
                                    {% for hijo in trabajador.hijos %}
                                        <li>{{ hijo.genero|default('No especificado') }} - {{ hijo.nombres|default('Sin nombre') }} ({{ hijo.edad|default('Edad desconocida') }} años, Talla Zapato: {{ hijo.talla_zapato|default('N/A') }}, Camisa: {{ hijo.talla_camisa|default('N/A') }}, Pantalón: {{ hijo.talla_pantalon|default('N/A') }})</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='hijos') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='hijos') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores con tratamiento</h2>
            <button onclick="toggleReport('tratamiento-content')">Generar Reporte</button>
            <div id="tratamiento-content" class="report-content">
                <ul class="report-list">
                    {% for trabajador in trabajadores_con_tratamiento %}
                        <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }} - Tratamiento: {{ trabajador.tratamiento }} (Enfermedad: {{ trabajador.padece_enfermedad }})</li>
                    {% endfor %}
                </ul>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='tratamiento') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='tratamiento') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Lista de trabajadores con discapacidad</h2>
            <button onclick="toggleReport('discapacidad-content')">Generar Reporte</button>
            <div id="discapacidad-content" class="report-content">
                <ul class="report-list">
                    {% for trabajador in trabajadores_con_discapacidad %}
                        <li>{{ trabajador.nombres }} {{ trabajador.apellidos }} - Cédula: {{ trabajador.cedula }} - Teléfono: {{ trabajador.telefono_movil }} - Tipo de Discapacidad: {{ trabajador.tipo_discapacidad }}</li>
                    {% endfor %}
                </ul>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="window.location.href='{{ url_for('guardar_reporte_especifico_seccion', seccion='discapacidad') }}'">Guardar Reporte</button>
                    <button onclick="window.location.href='{{ url_for('generar_pdf_reporte_especifico_seccion', seccion='discapacidad') }}'">Generar PDF</button>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2>Reportes por filtro Personalizado</h2>
            <button onclick="toggleReport('personalizado-content')">Generar Reporte</button>
            <div id="personalizado-content" class="report-content">
                <p>Aquí podrás crear reportes basados en criterios específicos de los datos de los trabajadores.</p>
                <button onclick="window.location.href='{{ url_for('reportes_personalizado') }}'">Crear Reporte Personalizado</button>
                <div class="button-group">
                    <button onclick="window.print()">Imprimir</button>
                    <button onclick="alert('Guardar Reporte para filtro personalizado no implementado.');">Guardar Reporte</button>
                    <button onclick="alert('Generar PDF para filtro personalizado no implementado.');">Generar PDF</button>
                </div>
            </div>
        </div>

        <a href="{{ url_for('dashboard') }}" class="back-link">Volver al Dashboard</a>
    </div>
</body>
</html>